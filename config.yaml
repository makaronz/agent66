# SMC Trading Agent Configuration - Simplified for Personal Use

# Application settings
app:
  name: "SMC Trading Agent"
  version: "1.0.0"
  environment: "development"
  mode: "paper"  # Trading mode: "paper" or "real" (default: paper)
  debug: true
  log_level: "INFO"

# Exchange configurations - SIMPLIFIED to ONE exchange
exchanges:
  binance:
    enabled: true
    api_key: ""  # Set via environment variable BINANCE_API_KEY
    api_secret: ""  # Set via environment variable BINANCE_API_SECRET
    websocket_url: "wss://stream.binance.com:9443/ws/"
    rest_url: "https://api.binance.com"
    rate_limit: 1200  # requests per minute
    symbols:
      - "BTCUSDT"  # Start with ONE symbol for simplicity
    data_types:
      - "trade"
      - "kline"

# REMOVED: Kafka - not needed for <1000 msg/s personal trading bot
# All data now flows through direct REST API calls

# Paper Trading Configuration
paper_trading:
  enabled: true
  initial_balance: 10000.0  # USD
  max_positions: 3
  position_size_percent: 1.0  # % of balance per trade
  update_interval: 10  # seconds

# Data pipeline settings
data_pipeline:
  health_check_interval: 60  # seconds
  reconnection_interval: 5   # seconds
  performance_log_interval: 60  # seconds
  max_reconnection_attempts: 10
  message_batch_size: 100

# Risk management settings - SIMPLIFIED
risk_manager:
  max_position_size: 1000   # USD (conservative for paper trading)
  max_daily_loss: 500       # USD
  max_drawdown: 0.10        # 10%
  position_limits:
    BTCUSDT: 0.1  # BTC
    default: 100.0  # USD
  stop_loss_percent: 2.0    # % from entry
  take_profit_ratio: 3.0    # Risk:Reward ratio

# SMC detection settings
smc_detector:
  min_volume_threshold: 1000000  # USD
  min_price_change: 0.001        # 0.1%
  time_window: 300               # 5 minutes
  confidence_threshold: 0.7      # 70%
  indicators:
    volume_spike: true
    price_momentum: true
    order_flow_imbalance: true
    liquidity_analysis: true

# Decision engine settings - ENHANCED with ML support
decision_engine:
  mode: "hybrid"  # "heuristic", "ml_ensemble", "hybrid", or "shadow_mode"
  confidence_threshold: 0.70  # Minimum confidence to execute trade
  use_ml_ensemble: true  # ENHANCED: Enabled for ML decision support
  min_ml_confidence: 0.60  # Minimum confidence for ML decisions

# Execution engine settings
execution_engine:
  max_slippage: 0.001  # 0.1%
  execution_timeout: 30  # seconds
  retry_attempts: 3
  order_types:
    - "market"
    - "limit"
    - "stop_loss"
    - "take_profit"
  exchanges:
    binance:
      enabled: true
      testnet: false
    bybit:
      enabled: true
      testnet: false
    oanda:
      enabled: true
      testnet: false

# Monitoring and logging - SIMPLIFIED
monitoring:
  health_check_interval: 60  # seconds
  port: 8000  # Python backend port
  metrics_collection: false  # Disabled for simplicity
  # REMOVED: Prometheus/Grafana - use simple logging instead

# Database settings - SIMPLIFIED to SQLite
database:
  type: "sqlite"
  path: "data/trades.db"  # Local SQLite database
  # REMOVED: PostgreSQL - not needed for personal use

# API settings
api:
  host: "0.0.0.0"
  port: 8000
  cors_origins:
    - "http://localhost:3000"
    - "http://localhost:8080"
  rate_limit:
    requests_per_minute: 100
    burst_size: 20

# Security settings
security:
  jwt_secret: ""  # Set via environment variable JWT_SECRET
  jwt_expiration: 3600  # 1 hour
  api_key_required: true
  encryption_enabled: true

# Development settings
development:
  mock_exchanges: false  # Use live data from TypeScript backend
  mock_data: false
  debug_mode: true
  hot_reload: false
  test_mode: false
  
# Backend API Configuration
backend_api:
  host: "localhost"
  port: 3001  # TypeScript backend (Express)
  python_port: 8000  # Python backend (FastAPI)
  timeout: 10  # seconds

# Multi-Timeframe Confluence Analysis System
multi_timeframe:
  enabled: true  # Enable/disable multi-timeframe analysis
  config_file: "config/multi_timeframe.yaml"
  symbols: ["BTCUSDT", "ETHUSDT"]  # Symbols to analyze
  timeframes: ["M5", "M15", "H1", "H4", "D1"]  # Active timeframes

  # Integration with existing components
  integration:
    enabled: true  # Enable integration with existing SMC components
    weights:  # Component weights for signal combination
      multi_timeframe: 0.4
      ml_ensemble: 0.3
      smc_indicators: 0.2
      risk_management: 0.1

    # Component availability
    data_ingestion_enabled: true
    ml_ensemble_enabled: true
    risk_manager_enabled: true
    smc_indicators_enabled: true

  # Performance settings
  performance:
    analysis_interval_minutes: 5  # How often to analyze symbols
    max_concurrent_symbols: 10    # Max symbols to analyze concurrently
    cache_enabled: true           # Enable result caching
    cache_ttl_minutes: 15        # Cache expiration time

  # Signal settings
  signals:
    min_confidence: 0.7         # Minimum confidence to generate signals
    min_risk_reward: 1.5        # Minimum risk/reward ratio
    max_signals_per_symbol: 2   # Maximum signals per symbol
    position_sizing:
      max_position_size: 0.05   # 5% maximum position
      base_position_size: 0.02  # 2% base position
      confluence_multiplier: 2.0

