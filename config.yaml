# SMC Trading Agent Configuration

# Application settings
app:
  name: "SMC Trading Agent"
  version: "1.0.0"
  environment: "${APP_ENV:development}"
  debug: true
  log_level: "${LOG_LEVEL:INFO}"

# Exchange configurations
exchanges:
  binance:
    enabled: true
    api_key: "${BINANCE_API_KEY:}"
    api_secret: "${BINANCE_API_SECRET:}"
    websocket_url: "wss://stream.binance.com:9443/ws/"
    rest_url: "https://api.binance.com"
    rate_limit: 1200  # requests per minute
    symbols:
      - "BTCUSDT"
      - "ETHUSDT"
      - "ADAUSDT"
      - "DOTUSDT"
      - "LINKUSDT"
    data_types:
      - "trade"
      - "orderbook"
      - "kline"
    
  bybit:
    enabled: true
    api_key: "${BYBIT_API_KEY:}"
    api_secret: "${BYBIT_API_SECRET:}"
    websocket_url: "wss://stream.bybit.com/v5/public/spot"
    rest_url: "https://api.bybit.com"
    rate_limit: 120  # requests per second
    symbols:
      - "BTCUSDT"
      - "ETHUSDT"
      - "ADAUSDT"
      - "DOTUSDT"
      - "LINKUSDT"
    data_types:
      - "trade"
      - "orderbook"
      - "kline"
    
  oanda:
    enabled: true
    api_key: "${OANDA_API_KEY:}"
    account_id: "${OANDA_ACCOUNT_ID:}"
    websocket_url: "wss://stream-fxtrade.oanda.com/v3/accounts/{account_id}/pricing/stream"
    rest_url: "https://api-fxtrade.oanda.com/v3"
    rate_limit: 120  # requests per second
    symbols:
      - "EUR_USD"
      - "GBP_USD"
      - "USD_JPY"
      - "USD_CHF"
      - "AUD_USD"
    data_types:
      - "trade"
      - "orderbook"
      - "kline"

# Kafka configuration
kafka:
  bootstrap_servers:
    - "localhost:9092"
  topic_prefix: "market_data"
  compression_type: "gzip"
  acks: "all"
  retries: 3
  batch_size: 16384
  linger_ms: 5
  buffer_memory: 33554432
  max_request_size: 1048576
  request_timeout_ms: 30000
  delivery_timeout_ms: 120000

# Data pipeline settings
data_pipeline:
  health_check_interval: 30  # seconds
  reconnection_interval: 5   # seconds
  performance_log_interval: 60  # seconds
  max_reconnection_attempts: 10
  message_batch_size: 100

# Risk management settings
risk_manager:
  max_position_size: 10000  # USD
  max_daily_loss: 1000     # USD
  max_drawdown: 0.05       # 5%
  circuit_breaker_threshold: 0.1  # 10%
  position_limits:
    BTCUSDT: 1.0
    ETHUSDT: 10.0
    default: 1000.0

# SMC detection settings
smc_detector:
  min_volume_threshold: 1000000  # USD
  min_price_change: 0.001        # 0.1%
  time_window: 300               # 5 minutes
  confidence_threshold: 0.7      # 70%
  indicators:
    volume_spike: true
    price_momentum: true
    order_flow_imbalance: true
    liquidity_analysis: true

# Model ensemble settings
model_ensemble:
  models:
    - name: "lstm_price_predictor"
      weight: 0.4
      enabled: true
    - name: "random_forest_classifier"
      weight: 0.3
      enabled: true
    - name: "gradient_boosting_regressor"
      weight: 0.3
      enabled: true
  prediction_horizon: 300  # 5 minutes
  retraining_interval: 3600  # 1 hour
  min_confidence: 0.6

# Execution engine settings
execution_engine:
  max_slippage: 0.001  # 0.1%
  execution_timeout: 30  # seconds
  retry_attempts: 3
  order_types:
    - "market"
    - "limit"
    - "stop_loss"
    - "take_profit"
  exchanges:
    binance:
      enabled: true
      testnet: false
    bybit:
      enabled: true
      testnet: false
    oanda:
      enabled: true
      testnet: false

# Monitoring and logging
monitoring:
  health_check_interval: 30  # seconds
  metrics_collection: true
  alerting:
    enabled: true
    email_notifications: false
    slack_webhook: ""
  grafana:
    enabled: true
    dashboard_url: "http://localhost:3000"
  prometheus:
    enabled: true
    port: 9090

# Database settings
database:
  type: "postgresql"
  host: "localhost"
  port: 5432
  name: "smc_trading_agent"
  user: "postgres"
  password: "${DB_PASSWORD:}"
  pool_size: 10
  max_overflow: 20

# Redis settings
redis:
  host: "localhost"
  port: 6379
  db: 0
  password: "${REDIS_PASSWORD:}"
  max_connections: 20

# API settings
api:
  host: "0.0.0.0"
  port: 8000
  cors_origins:
    - "http://localhost:3000"
    - "http://localhost:8080"
  rate_limit:
    requests_per_minute: 100
    burst_size: 20

# Security settings
security:
  jwt_secret: ""  # Set via environment variable JWT_SECRET
  jwt_secret: "${JWT_SECRET:}"
  jwt_expiration: 3600  # 1 hour
  api_key_required: true
  encryption_enabled: true

# Development settings
development:
  mock_exchanges: false
  mock_data: false
  debug_mode: true
  hot_reload: true
  test_mode: false

