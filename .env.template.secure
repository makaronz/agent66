# ═══════════════════════════════════════════════════════════════════════════════
# SMC Trading Agent - SECURE Environment Template (Hardened)
# ═══════════════════════════════════════════════════════════════════════════════
#
# 🚨 SECURITY NOTICE:
# 1. Copy this file to .env.local for development
# 2. Copy this file to .env.production for production
# 3. NEVER commit actual secrets to version control
# 4. Use the provided scripts to generate secure secrets
# 5. Rotate secrets regularly (every 90 days recommended)
# 6. Enable secret management (Vault, AWS Secrets Manager, etc.)
# ═══════════════════════════════════════════════════════════════════════════════

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🏗️  APPLICATION CONFIGURATION                                               │
# └─────────────────────────────────────────────────────────────────────────────┘

# Application Environment (development|staging|production)
NODE_ENV=development

# Application Ports (Standardized across all environments)
# Frontend: 5173 (Vite standard)
# Backend API: 5000 (Express standard)
# Trading Agent: 8001 (Python FastAPI)
# Monitoring: 9090 (Prometheus), 3001 (Grafana)
PORT=5000
HOST=0.0.0.0

# Application Metadata
APP_NAME=SMC_Trading_Agent
APP_VERSION=1.0.0
APP_DEBUG=false

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🔐  SECURITY & AUTHENTICATION (HARDENED)                                    │
# └─────────────────────────────────────────────────────────────────────────────┘

# JWT Configuration (SECURE: Generate with: npm run security:generate-secrets)
JWT_SECRET=GENERATE_SECURE_32_CHAR_SECRET_HERE
JWT_ACCESS_SECRET=GENERATE_SECURE_ACCESS_SECRET_HERE
JWT_REFRESH_SECRET=GENERATE_SECURE_REFRESH_SECRET_HERE
JWT_EXPIRATION=3600
JWT_REFRESH_EXPIRATION=604800

# Encryption Configuration (AES-256 key: 32 characters, generate with script)
ENCRYPTION_KEY=GENERATE_32_CHAR_ENCRYPTION_KEY_HERE

# Password Hashing (BCrypt - minimum 12 rounds for production)
BCRYPT_ROUNDS=12

# Session Management (Secure session configuration)
SESSION_SECRET=GENERATE_SECURE_SESSION_SECRET_HERE
SESSION_TIMEOUT=3600000

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🗄️  DATABASE CONFIGURATION (SECURE)                                         │
# └─────────────────────────────────────────────────────────────────────────────┘

# PostgreSQL Configuration (Use connection string for better security)
DATABASE_URL=postgresql://username:password@localhost:5432/smc_trading?sslmode=require
DB_HOST=localhost
DB_PORT=5432
DB_NAME=smc_trading
DB_USER=postgres
DB_PASSWORD=SET_SECURE_PASSWORD_HERE
DB_SSL=true
DB_SSL_MODE=require
DB_POOL_SIZE=10
DB_SSL_CERT_PATH=
DB_SSL_KEY_PATH=
DB_SSL_CA_PATH=

# MongoDB Configuration (Secure connection)
MONGO_URI=mongodb://username:password@localhost:27017/smc_trading?ssl=true&authSource=admin
MONGO_HOST=localhost
MONGO_PORT=27017
MONGO_DB_NAME=smc_trading
MONGO_USER=SET_USERNAME_HERE
MONGO_PASSWORD=SET_SECURE_PASSWORD_HERE

# Redis Configuration (Secure connection with TLS)
REDIS_URL=redis://localhost:6379/0?tls=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=SET_REDIS_PASSWORD_HERE
REDIS_MAX_CONNECTIONS=20
REDIS_TLS_ENABLED=true

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🌐  SUPABASE CONFIGURATION (SECURE)                                          │
# └─────────────────────────────────────────────────────────────────────────────┘

# Supabase Project Configuration (Use service role for server operations)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=GENERATE_SUPABASE_ANON_KEY_HERE
SUPABASE_SERVICE_ROLE_KEY=GENERATE_SUPABASE_SERVICE_ROLE_KEY_HERE

# Frontend Supabase Configuration (VITE_ prefix for client-side)
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=GENERATE_SUPABASE_ANON_KEY_HERE

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 💰  TRADING API CONFIGURATION (SECURE)                                       │
# └─────────────────────────────────────────────────────────────────────────────┘

# Binance API Configuration (Use API key management system)
BINANCE_API_KEY=STORE_IN_VAULT_OR_SECRET_MANAGER
BINANCE_API_SECRET=STORE_IN_VAULT_OR_SECRET_MANAGER
BINANCE_TESTNET=true

# Bybit API Configuration (Use API key management system)
BYBIT_API_KEY=STORE_IN_VAULT_OR_SECRET_MANAGER
BYBIT_API_SECRET=STORE_IN_VAULT_OR_SECRET_MANAGER
BYBIT_TESTNET=true

# OANDA API Configuration (Use API key management system)
OANDA_API_KEY=STORE_IN_VAULT_OR_SECRET_MANAGER
OANDA_ACCOUNT_ID=STORE_IN_VAULT_OR_SECRET_MANAGER
OANDA_ENVIRONMENT=practice

# Trading Configuration
TRADING_MODE=paper
MAX_CONCURRENT_TRADES=3
DEFAULT_RISK_PERCENTAGE=1
DEFAULT_STOP_LOSS_PERCENTAGE=0.5
DEFAULT_TAKE_PROFIT_PERCENTAGE=2

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🌍  FRONTEND CONFIGURATION (SECURE)                                          │
# └─────────────────────────────────────────────────────────────────────────────┘

# Frontend API Configuration
VITE_API_URL=http://localhost:5000
VITE_API_TIMEOUT=10000

# WebSocket Configuration (Secure WebSocket)
VITE_WEBSOCKET_URL=ws://localhost:8001
VITE_WEBSOCKET_RECONNECT_DELAY=5000
VITE_WEBSOCKET_PING_INTERVAL=30000
VITE_WEBSOCKET_PONG_TIMEOUT=10000
VITE_MAX_RECONNECT_ATTEMPTS=3

# Trading UI Configuration (Disabled by default for security)
VITE_ENABLE_TRADING=false
VITE_MAX_TRADE_SIZE=1000
VITE_DEFAULT_CHART_PERIOD=1h
VITE_MARKET_DATA_THROTTLE_MS=1000

# Development Configuration (Disabled in production)
VITE_ENABLE_STRICT_MODE=false
VITE_ENABLE_DEBUG_LOGS=true
VITE_ENABLE_PERFORMANCE_MONITORING=true

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🛡️  RATE LIMITING & SECURITY (ENHANCED)                                     │
# └─────────────────────────────────────────────────────────────────────────────┘

# Rate Limiting Configuration (Stricter limits for production)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# API Rate Limiting (Binance - strict limits)
VITE_BINANCE_RATE_LIMIT_REQUESTS=1200
VITE_BINANCE_RATE_LIMIT_INTERVAL=60000
VITE_MARKET_DATA_THROTTLE_MS=60000

# Security Headers (All enabled by default)
HELMET_ENABLED=true
CORS_ENABLED=true
CORS_ORIGIN=http://localhost:5173
CSRF_PROTECTION=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# DDoS Protection (Enhanced)
DDOS_PROTECTION=true
DDOS_THRESHOLD=100
DDOS_WINDOW_MS=60000
DDOS_AUTO_BLOCK_ENABLED=true
DDOS_BLOCK_DURATION=3600000

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 📊  LOGGING & MONITORING (SECURE)                                            │
# └─────────────────────────────────────────────────────────────────────────────┘

# Logging Configuration (Structured logging)
LOG_LEVEL=info
LOG_FILE=logs/smc_trading.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_FORMAT=json
LOG_SECURITY_EVENTS=true
LOG_AUDIT_TRAIL=true

# Monitoring Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_ENDPOINT=/metrics
PROMETHEUS_METRICS_PATH=/metrics
PROMETHEUS_AUTH_ENABLED=false

GRAFANA_ENABLED=true
GRAFANA_PORT=3001
GRAFANA_DASHBOARD_URL=http://localhost:3001
GRAFANA_AUTH_ENABLED=true

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_DETAILED=true

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🔄  BACKUP & ALERTING (ENHANCED)                                             │
# └─────────────────────────────────────────────────────────────────────────────┘

# Backup Configuration (Automated backups)
BACKUP_ENABLED=true
BACKUP_INTERVAL=3600000
BACKUP_RETENTION_HOURS=168
BACKUP_PATH=backups
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_COMPRESSION_ENABLED=true

# Alerting Configuration (Security alerts enabled)
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_SMTP_HOST=smtp.gmail.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USER=alerts@yourcompany.com
ALERT_EMAIL_PASSWORD=STORE_IN_VAULT_OR_SECRET_MANAGER
ALERT_EMAIL_TO=admin@yourcompany.com
ALERT_EMAIL_TLS=true
ALERT_EMAIL_SUBJECT_PREFIX="[SECURITY ALERT]"

# Webhook Configuration (Secure webhooks)
SLACK_WEBHOOK_URL=STORE_IN_VAULT_OR_SECRET_MANAGER
DISCORD_WEBHOOK_URL=STORE_IN_VAULT_OR_SECRET_MANAGER
TELEGRAM_BOT_TOKEN=STORE_IN_VAULT_OR_SECRET_MANAGER
TELEGRAM_CHAT_ID=STORE_IN_VAULT_OR_SECRET_MANAGER

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🔧  EXTERNAL SERVICES (SECURE)                                               │
# └─────────────────────────────────────────────────────────────────────────────┘

# HashiCorp Vault Configuration (Recommended for production)
VAULT_ENABLED=true
VAULT_ADDR=https://vault.yourcompany.com
VAULT_TOKEN=GENERATE_VAULT_TOKEN_HERE
VAULT_MOUNT_POINT=secret
VAULT_KV_VERSION=2
VAULT_TLS_VERIFY=true

# OpenWeatherMap API (Optional - for market sentiment analysis)
OPENWEATHER_API_KEY=STORE_IN_VAULT_OR_SECRET_MANAGER
OPENWEATHER_CITY=New York

# Financial Data APIs (Optional - store securely)
ALPHA_VANTAGE_API_KEY=STORE_IN_VAULT_OR_SECRET_MANAGER
FINNHUB_API_KEY=STORE_IN_VAULT_OR_SECRET_MANAGER

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🐳  DOCKER & DEPLOYMENT (SECURE)                                             │
# └─────────────────────────────────────────────────────────────────────────────┘

# Docker Configuration (Secure registry)
DOCKER_REGISTRY=your-registry.com
DOCKER_IMAGE_TAG=latest
DOCKER_RESTART_POLICY=unless-stopped
DOCKER_SECURITY_SCAN_ENABLED=true
DOCKER_USER=nonroot

# SSL/TLS Configuration (Production - required)
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem
SSL_CA_PATH=/etc/ssl/certs/ca.pem
SSL_PROTOCOL=TLSv1.2
SSL_CIPHERS=ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 🧪  DEVELOPMENT & TESTING (SECURE)                                           │
# └─────────────────────────────────────────────────────────────────────────────┘

# Development Flags (Disabled in production)
CHOKIDAR_USEPOLLING=false
FAST_REFRESH=true
GENERATE_SOURCEMAP=false

# Testing Configuration (Secure test environment)
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/smc_trading_test?sslmode=require
TEST_REDIS_URL=redis://localhost:6379/1
TEST_MODE=false
TEST_TIMEOUT=30000

# Mock Configuration (For development only)
MOCK_EXCHANGES=true
MOCK_DATA=false
MOCK_ORDERS=true
MOCK_WEBSOCKET=false

# ┌─────────────────────────────────────────────────────────────────────────────┐
# │ 📝  CHANGELOG & VERSIONING                                                  │
# └─────────────────────────────────────────────────────────────────────────────┘

# Configuration Version
CONFIG_VERSION=2.0.0
LAST_UPDATED=2025-01-14
SECURITY_VERSION=1.0.0

# Migration Tracking
MIGRATIONS_RUN=false
SEED_DATA_LOADED=false
SECURITY_AUDIT_DATE=2025-01-14

# ═══════════════════════════════════════════════════════════════════════════════
# 🚨 SECURITY CHECKLIST BEFORE PRODUCTION:
# ═══════════════════════════════════════════════════════════════════════════════
# ☐ Run: npm run security:generate-secrets to create secure secrets
# ☐ Run: npm run security:validate-config to validate configuration
# ☐ Run: npm run security:scan to perform comprehensive security scan
# ☐ Enable Vault or secret management system
# ☐ Set up real Supabase project with proper keys
# ☐ Configure production database with SSL/TLS
# ☐ Set up Redis with authentication and TLS
# ☐ Configure trading API keys (use testnet initially)
# ☐ Set up monitoring with Prometheus and Grafana
# ☐ Configure SSL certificates and enable HTTPS
# ═══════════════════════════════════════════════════════════════════════════════