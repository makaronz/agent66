const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-BWOdoUig.js","assets/vendor-CCzY5YmT.js","assets/react-m-WA-DAu.js","assets/SEOHead-CWeMjKrp.js","assets/TradingInterface-Bc3ZXqed.js","assets/utils-qIfB5D_q.js","assets/Analytics-C0y66j13.js","assets/Configuration-ByF0FYfc.js","assets/Monitoring-C2r--RQA.js","assets/Research-CKqSoYAg.js","assets/LazyImage-Degy4hjP.js","assets/RiskManagement-BWmD-Qpm.js","assets/Reports-Z-l6AvCq.js","assets/Login-JdfYULzr.js","assets/MFASettings-Dd4W2dDM.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,s=(s,r,t)=>((s,r,t)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t)(s,"symbol"!=typeof r?r+"":r,t);import{c as r,i as t,r as a,u as n,j as i,X as o,C as l,T as c,S as d,A as u,B as m,b as h,F as x,L as g,M as f,d as p,U as y,e as b,O as w,R as j,f as v,h as N,k,E as z,l as _,m as S,n as I,K as C,V as P,Q as T,H as E,o as L,p as M,q as O,s as R,t as q}from"./react-m-WA-DAu.js";import{t as A,d as D,e as F,L as U,S as B,E as W,x as Z,$ as J,_ as V}from"./vendor-CCzY5YmT.js";import{c as H}from"./utils-qIfB5D_q.js";function G(...e){return A(H(e))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const $=D("https://fqhuoszrysapxrvyaqao.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxaHVvc3pyeXNhcHhydnlhcWFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4MjMwMTIsImV4cCI6MjA3MDM5OTAxMn0.aaAxrGxtl2Q7j0tRRGY5PBTJaN3mu2zxUOCo-oqIonU",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),X=r()(t((e,s)=>({user:null,session:null,profile:null,isLoading:!0,isInitialized:!1,error:null,retryCount:0,setUser:s=>e(e=>{e.user=s}),setSession:s=>e(e=>{e.session=s}),setProfile:s=>e(e=>{e.profile=s}),setLoading:s=>e(e=>{e.isLoading=s}),setInitialized:s=>e(e=>{e.isInitialized=s}),setError:s=>e(e=>{e.error=s}),incrementRetry:()=>e(e=>{e.retryCount+=1}),resetRetry:()=>e(e=>{e.retryCount=0}),signIn:async(s,r)=>{e(e=>{e.isLoading=!0,e.error=null});try{const{data:e,error:t}=await $.auth.signInWithPassword({email:s,password:r});if(t)throw t;return{error:null}}catch(t){return e(e=>{e.error=t.message,e.isLoading=!1}),{error:t}}},signUp:async(s,r)=>{e(e=>{e.isLoading=!0,e.error=null});try{const{data:e,error:t}=await $.auth.signUp({email:s,password:r});if(t)throw t;return{error:null}}catch(t){return e(e=>{e.error=t.message,e.isLoading=!1}),{error:t}}},signOut:async()=>{e(e=>{e.isLoading=!0,e.error=null});try{const{error:s}=await $.auth.signOut();if(s)throw s;e(e=>{e.user=null,e.session=null,e.profile=null,e.isLoading=!1,e.error=null})}catch(s){e(e=>{e.error=s.message,e.isLoading=!1})}},resetPassword:async e=>{try{const{error:s}=await $.auth.resetPasswordForEmail(e);return{error:s}}catch(s){return{error:s}}},fetchProfile:async s=>{try{const{data:r,error:t}=await $.from("users").select("*").eq("id",s).single();if(t&&"PGRST116"!==t.code)throw t;e(e=>{e.profile=r})}catch(r){e(e=>{e.error=r.message})}},updateProfile:async r=>{const{user:t}=s();if(!t)return{error:new Error("No user logged in")};try{const{data:s,error:a}=await $.from("users").upsert({id:t.id,email:t.email,...r,updated_at:(new Date).toISOString()}).select().single();if(a)throw a;return e(e=>{e.profile=s}),{error:null}}catch(a){return e(e=>{e.error=a.message}),{error:a}}},initialize:async()=>{const{retryCount:r,incrementRetry:t,resetRetry:a}=s();e(e=>{e.isLoading=!0,e.error=null});try{const{data:{session:r},error:t}=await $.auth.getSession();if(t)throw t;r&&(e(e=>{e.session=r,e.user=r.user}),await s().fetchProfile(r.user.id)),e(e=>{e.isLoading=!1,e.isInitialized=!0}),a()}catch(n){if(r<3){t();const e=1e3*Math.pow(2,r);setTimeout(()=>{s().initialize()},e)}else e(e=>{e.error=`Failed to initialize auth after 3 attempts: ${n.message}`,e.isLoading=!1,e.isInitialized=!0})}}})));$.auth.onAuthStateChange(async(e,s)=>{const{setSession:r,setUser:t,setLoading:a,fetchProfile:n}=X.getState();r(s),t(s?.user??null),s?.user?await n(s.user.id):X.setState(e=>({...e,profile:null})),a(!1)});const Y=[{name:"Dashboard",href:"/",icon:l},{name:"Trading",href:"/trading",icon:c},{name:"Analytics",href:"/analytics",icon:l},{name:"Configuration",href:"/config",icon:d},{name:"Monitoring",href:"/monitoring",icon:u},{name:"Research",href:"/research",icon:m},{name:"Risk Management",href:"/risk",icon:h},{name:"Reports",href:"/reports",icon:x},{name:"MFA Security",href:"/mfa",icon:h}];function Q(){const[e,s]=a.useState(!1),r=n(),{user:t,profile:l,signOut:c}=X();return i.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[i.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-md z-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Przejdź do głównej zawartości"}),i.jsx("a",{href:"#navigation",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-40 bg-blue-600 text-white px-4 py-2 rounded-md z-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Przejdź do nawigacji"}),i.jsxs("div",{className:G("fixed inset-0 flex z-40 md:hidden",e?"block":"hidden"),children:[i.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>{s(!1)}}),i.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[i.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:i.jsx("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>{s(!1)},"aria-label":"Zamknij menu nawigacji",children:i.jsx(o,{className:"h-6 w-6 text-white","aria-hidden":"true"})})}),i.jsxs("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[i.jsx("div",{className:"flex-shrink-0 flex items-center px-4",children:i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"SMC Trading Agent"})}),i.jsx("nav",{id:"navigation",className:"mt-5 px-2 space-y-1",role:"navigation","aria-label":"Główna nawigacja",children:Y.map(e=>{const t=r.pathname===e.href;return i.jsxs(g,{to:e.href,className:G(t?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center px-2 py-2 text-base font-medium rounded-md"),onClick:()=>s(!1),children:[i.jsx(e.icon,{className:G(t?"text-blue-500":"text-gray-400 group-hover:text-gray-500","mr-4 flex-shrink-0 h-6 w-6")}),e.name]},e.name)})})]})]})]}),i.jsx("div",{className:"hidden md:flex md:flex-shrink-0",children:i.jsx("div",{className:"flex flex-col w-64",children:i.jsx("div",{className:"flex flex-col h-0 flex-1 border-r border-gray-200 bg-white",children:i.jsxs("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[i.jsx("div",{className:"flex items-center flex-shrink-0 px-4",children:i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"SMC Trading Agent"})}),i.jsx("nav",{className:"mt-5 flex-1 px-2 bg-white space-y-1",role:"navigation","aria-label":"Główna nawigacja",children:Y.map(e=>{const s=r.pathname===e.href;return i.jsxs(g,{to:e.href,className:G(s?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center px-2 py-2 text-sm font-medium rounded-md"),children:[i.jsx(e.icon,{className:G(s?"text-blue-500":"text-gray-400 group-hover:text-gray-500","mr-3 flex-shrink-0 h-6 w-6")}),e.name]},e.name)})})]})})})}),i.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[i.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[i.jsx("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 md:hidden",onClick:()=>s(!0),"aria-label":"Otwórz menu nawigacji",children:i.jsx(f,{className:"h-6 w-6","aria-hidden":"true"})}),i.jsxs("div",{className:"flex-1 px-4 flex justify-between",children:[i.jsx("div",{className:"flex-1 flex",children:i.jsx("div",{className:"w-full flex md:ml-0",children:i.jsx("div",{className:"relative w-full text-gray-400 focus-within:text-gray-600",children:i.jsx("div",{className:"flex items-center h-16",children:i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:Y.find(e=>e.href===r.pathname)?.name??"Dashboard"})})})})}),i.jsxs("div",{className:"ml-4 flex items-center md:ml-6",children:[i.jsx("button",{type:"button",className:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Powiadomienia",children:i.jsx(p,{className:"h-6 w-6","aria-hidden":"true"})}),i.jsx("div",{className:"ml-3 relative",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{type:"button",className:"bg-white rounded-full flex text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Profil użytkownika",children:i.jsx(y,{className:"h-8 w-8 rounded-full text-gray-400","aria-hidden":"true"})}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700",children:l?.full_name||"Użytkownik"}),i.jsx("div",{className:"text-xs text-gray-500",children:t?.email||"Brak e-maila"})]}),i.jsx("button",{type:"button",onClick:async()=>{await c()},className:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Wyloguj się",children:i.jsx(b,{className:"h-5 w-5","aria-hidden":"true"})})]})})]})]})]}),i.jsx("main",{id:"main-content",className:"flex-1 relative overflow-y-auto focus:outline-none",role:"main",children:i.jsx("div",{className:"py-6",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:i.jsx(w,{})})})})]})]})}const K=j.memo(({onSuccess:e,onSwitchToRegister:s,onForgotPassword:r})=>{const[t,n]=a.useState(""),[o,l]=a.useState(""),[c,d]=a.useState(!1),[u,m]=a.useState(!1),{signIn:h}=X();return i.jsx("div",{className:"w-full max-w-md mx-auto",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:i.jsx(v,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zaloguj się"}),i.jsx("p",{className:"text-gray-600",children:"Wprowadź swoje dane, aby uzyskać dostęp do konta"})]}),i.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),!u){m(!0);try{const{error:s}=await h(t,o);s||e?.()}finally{m(!1)}}},className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres e-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(N,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"email",type:"email",value:t,onChange:e=>n(e.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"twoj@email.com",required:!0,disabled:u})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Hasło"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(k,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"password",type:c?"text":"password",value:o,onChange:e=>l(e.target.value),className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Wprowadź hasło",required:!0,disabled:u}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>d(!c),disabled:u,"aria-label":c?"Ukryj hasło":"Pokaż hasło",children:c?i.jsx(z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600","aria-hidden":"true"}):i.jsx(_,{className:"h-5 w-5 text-gray-400 hover:text-gray-600","aria-hidden":"true"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Zapamiętaj mnie"})]}),r&&i.jsx("button",{type:"button",onClick:r,className:"text-sm text-blue-600 hover:text-blue-500 font-medium",disabled:u,children:"Zapomniałeś hasła?"})]}),i.jsx("button",{type:"submit",disabled:u||!t||!o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Logowanie..."]}):"Zaloguj się"})]}),s&&i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Nie masz konta?"," ",i.jsx("button",{onClick:s,className:"font-medium text-blue-600 hover:text-blue-500",disabled:u,children:"Zarejestruj się"})]})})]})})}),ee=({onSuccess:e,onSwitchToLogin:s})=>{const[r,t]=a.useState({email:"",password:"",confirmPassword:"",fullName:""}),[n,o]=a.useState(!1),[l,c]=a.useState(!1),[d,u]=a.useState(!1),[m,h]=a.useState({}),{signUp:x}=X(),g=(e,s)=>{t(r=>({...r,[e]:s})),m[e]&&h(s=>({...s,[e]:""}))};return i.jsx("div",{className:"w-full max-w-md mx-auto",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(S,{className:"w-8 h-8 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Utwórz konto"}),i.jsx("p",{className:"text-gray-600",children:"Wypełnij formularz, aby założyć nowe konto"})]}),i.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),!d&&(()=>{const e={};return r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email="Nieprawidłowy format adresu e-mail"):e.email="Adres e-mail jest wymagany",r.password?r.password.length<8?e.password="Hasło musi mieć co najmniej 8 znaków":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(r.password)||(e.password="Hasło musi zawierać małą literę, wielką literę i cyfrę"):e.password="Hasło jest wymagane",r.confirmPassword?r.password!==r.confirmPassword&&(e.confirmPassword="Hasła nie są identyczne"):e.confirmPassword="Potwierdzenie hasła jest wymagane",r.fullName.trim()||(e.fullName="Imię i nazwisko jest wymagane"),h(e),0===Object.keys(e).length})()){u(!0);try{const{error:s}=await x(r.email,r.password);s||e?.()}finally{u(!1)}}},className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Imię i nazwisko"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(y,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"fullName",type:"text",value:r.fullName,onChange:e=>g("fullName",e.target.value),className:"block w-full pl-10 pr-3 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors "+(m.fullName?"border-red-300":"border-gray-300"),placeholder:"Jan Kowalski",required:!0,disabled:d})]}),m.fullName&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.fullName})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres e-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(N,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"email",type:"email",value:r.email,onChange:e=>g("email",e.target.value),className:"block w-full pl-10 pr-3 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors "+(m.email?"border-red-300":"border-gray-300"),placeholder:"twoj@email.com",required:!0,disabled:d})]}),m.email&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.email})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Hasło"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(k,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"password",type:n?"text":"password",value:r.password,onChange:e=>g("password",e.target.value),className:"block w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors "+(m.password?"border-red-300":"border-gray-300"),placeholder:"Minimum 8 znaków",required:!0,disabled:d}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>o(!n),disabled:d,"aria-label":n?"Ukryj hasło":"Pokaż hasło",children:n?i.jsx(z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600","aria-hidden":"true"}):i.jsx(_,{className:"h-5 w-5 text-gray-400 hover:text-gray-600","aria-hidden":"true"})})]}),m.password&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.password})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Potwierdź hasło"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(k,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"confirmPassword",type:l?"text":"password",value:r.confirmPassword,onChange:e=>g("confirmPassword",e.target.value),className:"block w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors "+(m.confirmPassword?"border-red-300":"border-gray-300"),placeholder:"Powtórz hasło",required:!0,disabled:d}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!l),disabled:d,"aria-label":l?"Ukryj potwierdzenie hasła":"Pokaż potwierdzenie hasła",children:l?i.jsx(z,{className:"h-5 w-5 text-gray-400 hover:text-gray-600","aria-hidden":"true"}):i.jsx(_,{className:"h-5 w-5 text-gray-400 hover:text-gray-600","aria-hidden":"true"})})]}),m.confirmPassword&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.confirmPassword})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"terms",name:"terms",type:"checkbox",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded",required:!0}),i.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["Akceptuję"," ",i.jsx("a",{href:"#",className:"text-green-600 hover:text-green-500 font-medium",children:"regulamin"})," ","i"," ",i.jsx("a",{href:"#",className:"text-green-600 hover:text-green-500 font-medium",children:"politykę prywatności"})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Tworzenie konta..."]}):"Utwórz konto"})]}),s&&i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Masz już konto?"," ",i.jsx("button",{onClick:s,className:"font-medium text-green-600 hover:text-green-500",disabled:d,children:"Zaloguj się"})]})})]})})},se=({onSuccess:e,onBackToLogin:s})=>{const[r,t]=a.useState(""),[n,o]=a.useState(!1),[l,c]=a.useState(!1),{resetPassword:d}=X();return l?i.jsx("div",{className:"w-full max-w-md mx-auto",children:i.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(N,{className:"w-8 h-8 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"E-mail wysłany!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Sprawdź swoją skrzynkę pocztową. Wysłaliśmy link do resetowania hasła na adres:"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 bg-gray-50 rounded-lg p-3 mb-6",children:r}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Nie widzisz e-maila? Sprawdź folder spam lub spróbuj ponownie."}),s&&i.jsxs("button",{onClick:s,className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-500 font-medium",children:[i.jsx(I,{className:"w-4 h-4 mr-1"}),"Powrót do logowania"]})]})})}):i.jsx("div",{className:"w-full max-w-md mx-auto",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-orange-100 rounded-full mb-4",children:i.jsx(C,{className:"w-8 h-8 text-orange-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Resetuj hasło"}),i.jsx("p",{className:"text-gray-600",children:"Wprowadź swój adres e-mail, a wyślemy Ci link do resetowania hasła"})]}),i.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),!n){o(!0);try{const{error:s}=await d(r);s||(c(!0),setTimeout(()=>{e?.()},3e3))}finally{o(!1)}}},className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres e-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(N,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{id:"email",type:"email",value:r,onChange:e=>t(e.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors",placeholder:"twoj@email.com",required:!0,disabled:n})]})]}),i.jsx("button",{type:"submit",disabled:n||!r,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Wysyłanie..."]}):"Wyślij link resetujący"})]}),s&&i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("button",{onClick:s,className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-500",disabled:n,children:[i.jsx(I,{className:"w-4 h-4 mr-1"}),"Powrót do logowania"]})})]})})},re=j.memo(({isOpen:e,onClose:s,initialMode:r="login"})=>{const[t,n]=a.useState(r);if(!e)return null;const l=()=>{s()};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&s()},children:i.jsxs("div",{className:"relative max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("button",{onClick:s,className:"absolute top-4 right-4 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-50 transition-colors",children:i.jsx(o,{className:"w-5 h-5 text-gray-600"})}),"login"===t&&i.jsx(K,{onSuccess:l,onSwitchToRegister:()=>n("register"),onForgotPassword:()=>n("forgot-password")}),"register"===t&&i.jsx(ee,{onSuccess:l,onSwitchToLogin:()=>n("login")}),"forgot-password"===t&&i.jsx(se,{onSuccess:()=>n("login"),onBackToLogin:()=>n("login")})]})})}),te=j.memo(({size:e="md",color:s="blue",className:r=""})=>i.jsx("div",{className:`inline-block ${r}`,children:i.jsx("div",{className:`animate-spin rounded-full border-2 border-t-transparent ${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"}[e]} ${{blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",purple:"border-purple-600",gray:"border-gray-600"}[s]}`,role:"status","aria-label":"Ładowanie...",children:i.jsx("span",{className:"sr-only",children:"Ładowanie..."})})})),ae=({children:e,fallback:s,requireAuth:r=!0})=>{const{user:t,isLoading:n,isInitialized:o,error:l}=X(),[c,d]=a.useState(!1),[u,m]=a.useState(!1);if(j.useEffect(()=>{if(n&&o){const e=setTimeout(()=>{m(!0)},8e3);return()=>clearTimeout(e)}},[n,o]),n&&!u)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(te,{size:"lg"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Loading authentication..."}),i.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[i.jsxs("p",{children:["Initialized: ",o?"Yes":"No"]}),i.jsxs("p",{children:["Loading: ",n?"Yes":"No"]})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{onClick:()=>{m(!1),window.location.reload()},className:"text-blue-600 hover:text-blue-500 text-sm underline",children:"Refresh if stuck"})})]})});if(u||l){const e=l?"Authentication Error":"Authentication Timeout",s=l||"Authentication is taking longer than expected. This might be due to network issues or server problems.";return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:e}),i.jsx("p",{className:"text-gray-600 mb-2",children:s}),l&&i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Please check your internet connection and try again."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{onClick:()=>{m(!1),window.location.reload()},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Retry"}),i.jsx("button",{onClick:()=>{m(!1),d(!0)},className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors",children:"Continue without authentication"})]})]})})}return r?t?i.jsx(i.Fragment,{children:e}):s?i.jsx(i.Fragment,{children:s}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full text-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Wymagane logowanie"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Aby uzyskać dostęp do tej funkcji, musisz się zalogować lub utworzyć nowe konto."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>d(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:"Zaloguj się"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Nie masz konta?"," ",i.jsx("button",{onClick:()=>d(!0),className:"text-blue-600 hover:text-blue-500 font-medium",children:"Zarejestruj się tutaj"})]})]})]})})}),i.jsx(re,{isOpen:c,onClose:()=>d(!1),initialMode:"login"})]}):i.jsx(i.Fragment,{children:e})},ne=D("https://fqhuoszrysapxrvyaqao.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxaHVvc3pyeXNhcHhydnlhcWFvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4MjMwMTIsImV4cCI6MjA3MDM5OTAxMn0.aaAxrGxtl2Q7j0tRRGY5PBTJaN3mu2zxUOCo-oqIonU",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"smc-trading-auth-token",flowType:"pkce"}}),ie=async()=>{const{data:{user:e},error:s}=await ne.auth.getUser();return{user:e,error:s}},oe={users:{get:async e=>{const{data:s,error:r}=await ne.from("users").select("*").eq("id",e).single();return{data:s,error:r}},upsert:async e=>{const{data:s,error:r}=await ne.from("users").upsert(e).select().single();return{data:s,error:r}},update:async(e,s)=>{const{data:r,error:t}=await ne.from("users").update(s).eq("id",e).select().single();return{data:r,error:t}}},configurations:{list:async e=>{const{data:s,error:r}=await ne.from("user_configurations").select("*").eq("user_id",e).eq("is_active",!0).order("updated_at",{ascending:!1});return{data:s,error:r}},get:async(e,s)=>{const{data:r,error:t}=await ne.from("user_configurations").select("*").eq("user_id",e).eq("config_name",s).eq("is_active",!0).single();return{data:r,error:t}},upsert:async(e,s,r)=>{const{data:t,error:a}=await ne.from("user_configurations").upsert({user_id:e,config_name:s,config_json:r,is_active:!0}).select().single();return{data:t,error:a}}},sessions:{list:async e=>{const{data:s,error:r}=await ne.from("trading_sessions").select("*").eq("user_id",e).order("created_at",{ascending:!1});return{data:s,error:r}},get:async e=>{const{data:s,error:r}=await ne.from("trading_sessions").select("*").eq("id",e).single();return{data:s,error:r}},create:async e=>{const{data:s,error:r}=await ne.from("trading_sessions").insert(e).select().single();return{data:s,error:r}},update:async(e,s)=>{const{data:r,error:t}=await ne.from("trading_sessions").update(s).eq("id",e).select().single();return{data:r,error:t}}},trades:{list:async(e,s)=>{let r=ne.from("trades").select("*").eq("user_id",e).order("timestamp",{ascending:!1});s&&(r=r.eq("session_id",s));const{data:t,error:a}=await r;return{data:t,error:a}},get:async e=>{const{data:s,error:r}=await ne.from("trades").select("*").eq("id",e).single();return{data:s,error:r}},create:async e=>{const{data:s,error:r}=await ne.from("trades").insert(e).select().single();return{data:s,error:r}},update:async(e,s)=>{const{data:r,error:t}=await ne.from("trades").update(s).eq("id",e).select().single();return{data:r,error:t}}},signals:{list:async(e,s=50)=>{let r=ne.from("smc_signals").select("*").order("created_at",{ascending:!1}).limit(s);e&&(r=r.eq("user_id",e));const{data:t,error:a}=await r;return{data:t,error:a}},get:async e=>{const{data:s,error:r}=await ne.from("smc_signals").select("*").eq("id",e).single();return{data:s,error:r}},create:async e=>{const{data:s,error:r}=await ne.from("smc_signals").insert(e).select().single();return{data:s,error:r}},update:async(e,s)=>{const{data:r,error:t}=await ne.from("smc_signals").update(s).eq("id",e).select().single();return{data:r,error:t}}}},le={subscribeTrades:(e,s)=>ne.channel("trades").on("postgres_changes",{event:"*",schema:"public",table:"trades",filter:`user_id=eq.${e}`},s).subscribe(),subscribeSignals:(e,s)=>{const r=ne.channel("smc_signals");return s?r.on("postgres_changes",{event:"*",schema:"public",table:"smc_signals",filter:`user_id=eq.${s}`},e).subscribe():r.on("postgres_changes",{event:"*",schema:"public",table:"smc_signals"},e).subscribe()},subscribeSessions:(e,s)=>ne.channel("trading_sessions").on("postgres_changes",{event:"*",schema:"public",table:"trading_sessions",filter:`user_id=eq.${e}`},s).subscribe(),unsubscribe:e=>ne.removeChannel(e)},ce=a.createContext(void 0),de=({children:e})=>{const[s,r]=a.useState({user:null,profile:null,session:null,loading:!0,initialized:!1,connectionError:null,isOffline:!1});a.useEffect(()=>{let e,t,a=!0,n=0;const i=e=>{a&&r(e=>({...e,loading:!1,initialized:!0,connectionError:null}))},o=async(s=!1)=>{try{const{session:s,error:c}=await(async()=>{const{data:{session:e},error:s}=await ne.auth.getSession();return{session:e,error:s}})();if(!a)return;if(e&&clearTimeout(e),c)return n<3&&(c.message.includes("network")||c.message.includes("timeout"))?(n++,void(t=setTimeout(()=>{o(!0)},2e3*n))):void r(e=>({...e,user:null,profile:null,session:null,loading:!1,initialized:!0,connectionError:c.message,isOffline:!1}));if(s?.user){r(e=>({...e,user:s.user,session:s,loading:!1,initialized:!0,connectionError:null,isOffline:!1}));try{const{data:e}=await oe.users.get(s.user.id);if(!a)return;if(e)r(s=>({...s,profile:e}));else{const{data:e}=await oe.users.upsert({id:s.user.id,email:s.user.email||"",full_name:s.user.user_metadata?.full_name||null,avatar_url:s.user.user_metadata?.avatar_url||null});r(s=>({...s,profile:e}))}}catch(l){}}else i()}catch(c){if(!a)return;if(n<3&&c instanceof Error&&(c.message.includes("network")||c.message.includes("fetch")))return n++,void(t=setTimeout(()=>{o(!0)},2e3*n));r(e=>({...e,user:null,profile:null,session:null,loading:!1,initialized:!0,connectionError:c instanceof Error?c.message:"Unknown error",isOffline:!0}))}};e=setTimeout(()=>{a&&!s.initialized&&i()},5e3),o();const{data:{subscription:l}}=(c=async(e,s)=>{if(a)try{if("SIGNED_IN"===e&&s?.user){r(e=>({...e,user:s.user,session:s,loading:!1,initialized:!0,connectionError:null,isOffline:!1}));try{const{data:e}=await oe.users.get(s.user.id);if(!a)return;if(e)r(s=>({...s,profile:e}));else{const{data:e}=await oe.users.upsert({id:s.user.id,email:s.user.email||"",full_name:s.user.user_metadata?.full_name||null,avatar_url:s.user.user_metadata?.avatar_url||null});r(s=>({...s,profile:e}))}}catch(t){}}else"SIGNED_OUT"===e?r(e=>({...e,user:null,profile:null,session:null,loading:!1,initialized:!0,connectionError:null,isOffline:!1})):"TOKEN_REFRESHED"===e&&s&&r(e=>({...e,session:s,user:s.user}))}catch(t){}},ne.auth.onAuthStateChange(c));var c;return()=>{a=!1,e&&clearTimeout(e),t&&clearTimeout(t),l.unsubscribe()}},[]);const t={...s,signUp:async(e,s,t)=>{try{r(e=>({...e,loading:!0}));const{data:a,error:n}=await(async(e,s,r)=>{const{data:t,error:a}=await ne.auth.signUp({email:e,password:s,options:{data:r}});return{data:t,error:a}})(e,s,t);return n?(P.error(n.message),{success:!1,error:n.message}):(a.user&&!a.session&&P.success("Sprawdź swoją skrzynkę e-mail, aby potwierdzić konto"),{success:!0})}catch(a){const e=a.message||"Błąd podczas rejestracji";return P.error(e),{success:!1,error:e}}finally{r(e=>({...e,loading:!1}))}},signIn:async(e,s)=>{try{r(e=>({...e,loading:!0}));const{data:t,error:a}=await(async(e,s)=>{const{data:r,error:t}=await ne.auth.signInWithPassword({email:e,password:s});return{data:r,error:t}})(e,s);return a?(P.error(a.message),{success:!1,error:a.message}):(P.success("Zalogowano pomyślnie!"),{success:!0})}catch(t){const e=t.message||"Błąd podczas logowania";return P.error(e),{success:!1,error:e}}finally{r(e=>({...e,loading:!1}))}},signOut:async()=>{try{r(e=>({...e,loading:!0}));const{error:e}=await(async()=>{const{error:e}=await ne.auth.signOut();return{error:e}})();e?P.error(e.message):P.success("Wylogowano pomyślnie")}catch(e){P.error(e.message||"Błąd podczas wylogowywania")}finally{r(e=>({...e,loading:!1}))}},resetPassword:async e=>{try{const{data:s,error:r}=await(async e=>{const{data:s,error:r}=await ne.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});return{data:s,error:r}})(e);return r?(P.error(r.message),{success:!1,error:r.message}):(P.success("Link do resetowania hasła został wysłany na Twój e-mail"),{success:!0})}catch(s){const e=s.message||"Błąd podczas resetowania hasła";return P.error(e),{success:!1,error:e}}},updatePassword:async e=>{try{const{data:s,error:r}=await(async e=>{const{data:s,error:r}=await ne.auth.updateUser({password:e});return{data:s,error:r}})(e);return r?(P.error(r.message),{success:!1,error:r.message}):(P.success("Hasło zostało zaktualizowane"),{success:!0})}catch(s){const e=s.message||"Błąd podczas aktualizacji hasła";return P.error(e),{success:!1,error:e}}},updateProfile:async e=>{try{const{user:s}=await ie();if(!s)return{success:!1,error:"Użytkownik nie jest zalogowany"};const{data:t,error:a}=await oe.users.update(s.id,e);return a?(P.error(a.message),{success:!1,error:a.message}):(r(e=>({...e,profile:t})),P.success("Profil został zaktualizowany"),{success:!0})}catch(s){const e=s.message||"Błąd podczas aktualizacji profilu";return P.error(e),{success:!1,error:e}}},refreshProfile:async()=>{try{const{user:e}=await ie();if(!e)return;const{data:s}=await oe.users.get(e.id);s&&r(e=>({...e,profile:s}))}catch(e){}}};return i.jsx(ce.Provider,{value:t,children:e})},ue=new F({defaultOptions:{queries:{gcTime:3e5,staleTime:3e4,retry:(e,s)=>!(s?.status>=400&&s?.status<500)&&e<3,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:"always",networkMode:"online"},mutations:{retry:1,retryDelay:1e3,networkMode:"online"}}}),me={marketData:{all:["marketData"],tickers:()=>[...me.marketData.all,"tickers"],ticker:e=>[...me.marketData.tickers(),e],orderBook:e=>[...me.marketData.all,"orderBook",e],klines:(e,s)=>[...me.marketData.all,"klines",e,s],trades:e=>[...me.marketData.all,"trades",e]}},he=(e,s)=>{"undefined"!=typeof window&&window.gtag&&window.gtag("event","query_error",{error_message:e.message,context:s})},xe=({children:e})=>i.jsx(T,{client:ue,children:e});class ge{constructor(e="/api/analytics/vitals",r=10,t=3e4){s(this,"metrics",[]),s(this,"endpoint"),s(this,"batchSize"),s(this,"flushInterval"),s(this,"flushTimer",null),s(this,"handleMetric",e=>{const s={name:e.name,value:e.value,rating:this.getRating(e.name,e.value),timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent};this.metrics.push(s),this.metrics.length>=this.batchSize&&this.flush()}),this.endpoint=e,this.batchSize=r,this.flushInterval=t,this.startAutoFlush()}getRating(e,s){const r={CLS:{good:.1,poor:.25},INP:{good:200,poor:500},FCP:{good:1800,poor:3e3},LCP:{good:2500,poor:4e3},TTFB:{good:800,poor:1800}}[e];return r?s<=r.good?"good":s<=r.poor?"needs-improvement":"poor":"good"}async flush(){if(0===this.metrics.length)return;const e=[...this.metrics];this.metrics=[];try{await fetch(this.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:e}),keepalive:!0})}catch(s){this.metrics.unshift(...e)}}startAutoFlush(){this.flushTimer=setInterval(()=>{this.flush()},this.flushInterval)}init(){U(this.handleMetric),B(this.handleMetric),W(this.handleMetric),Z(this.handleMetric),J(this.handleMetric),window.addEventListener("beforeunload",()=>{this.flush()}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.flush()})}destroy(){this.flushTimer&&(clearInterval(this.flushTimer),this.flushTimer=null),this.flush()}getMetrics(){return[...this.metrics]}clearMetrics(){this.metrics=[]}}let fe=null;const pe=()=>fe,ye=a.createContext(null),be=({children:e,endpoint:s,batchSize:r,flushInterval:t,enabled:n=!0})=>{a.useEffect(()=>{if(n&&"undefined"!=typeof window)return((e,s,r)=>{"undefined"!=typeof window&&(fe||(fe=new ge(e,s,r),fe.init()))})(s,r,t),()=>{fe&&(fe.destroy(),fe=null)}},[s,r,t,n]);const o={getMetrics:()=>{const e=pe();return e?e.getMetrics():[]},clearMetrics:()=>{const e=pe();e&&e.clearMetrics()}};return i.jsx(ye.Provider,{value:o,children:e})},we=a.lazy(()=>V(()=>import("./Dashboard-BWOdoUig.js").then(e=>e.D),__vite__mapDeps([0,1,2,3]))),je=a.lazy(()=>V(()=>import("./TradingInterface-Bc3ZXqed.js"),__vite__mapDeps([4,2,1,5]))),ve=a.lazy(()=>V(()=>import("./Analytics-C0y66j13.js"),__vite__mapDeps([6,2,1,5]))),Ne=a.lazy(()=>V(()=>import("./Configuration-ByF0FYfc.js"),__vite__mapDeps([7,2,1,5]))),ke=a.lazy(()=>V(()=>import("./Monitoring-C2r--RQA.js"),__vite__mapDeps([8,2,1,5]))),ze=a.lazy(()=>V(()=>import("./Research-CKqSoYAg.js"),__vite__mapDeps([9,2,1,10,5]))),_e=a.lazy(()=>V(()=>import("./RiskManagement-BWmD-Qpm.js"),__vite__mapDeps([11,2,1,5]))),Se=a.lazy(()=>V(()=>import("./Reports-Z-l6AvCq.js"),__vite__mapDeps([12,2,1,5]))),Ie=a.lazy(()=>V(()=>import("./Login-JdfYULzr.js"),__vite__mapDeps([13,2,1,3,5]))),Ce=a.lazy(()=>V(()=>import("./MFASettings-Dd4W2dDM.js"),__vite__mapDeps([14,1,2,5])));function Pe(){try{return i.jsx(E,{children:i.jsx(be,{enabled:!0,endpoint:"/api/analytics/vitals",batchSize:5,flushInterval:3e4,children:i.jsx(xe,{children:i.jsx(de,{children:i.jsxs(L,{children:[i.jsx(a.Suspense,{fallback:i.jsx("div",{className:"p-8 flex items-center justify-center",children:i.jsx(te,{})}),children:i.jsxs(M,{children:[i.jsx(O,{path:"/login",element:i.jsx(Ie,{})}),i.jsxs(O,{path:"/",element:i.jsx(ae,{children:i.jsx(Q,{})}),children:[i.jsx(O,{index:!0,element:i.jsx(we,{})}),i.jsx(O,{path:"trading",element:i.jsx(je,{})}),i.jsx(O,{path:"analytics",element:i.jsx(ve,{})}),i.jsx(O,{path:"config",element:i.jsx(Ne,{})}),i.jsx(O,{path:"monitoring",element:i.jsx(ke,{})}),i.jsx(O,{path:"research",element:i.jsx(ze,{})}),i.jsx(O,{path:"risk",element:i.jsx(_e,{})}),i.jsx(O,{path:"reports",element:i.jsx(Se,{})}),i.jsx(O,{path:"mfa",element:i.jsx(Ce,{})})]})]})}),i.jsx(R,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})})})}catch(e){throw e}}class Te extends a.Component{constructor(e){super(e),this.state={hasError:!1},window.addEventListener("error",e=>{}),window.addEventListener("unhandledrejection",e=>{})}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){this.setState({error:e,errorInfo:s})}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:i.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Wystąpił błąd aplikacji"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Coś poszło nie tak. Sprawdź konsolę przeglądarki, aby uzyskać więcej informacji."}),i.jsxs("details",{className:"text-left bg-gray-50 p-4 rounded-lg mb-4",children:[i.jsx("summary",{className:"cursor-pointer font-medium text-gray-700 mb-2",children:"Szczegóły błędu"}),i.jsxs("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap overflow-auto",children:[this.state.error?.toString(),this.state.errorInfo?.componentStack]})]}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Odśwież stronę"})]})})}):this.props.children}}try{const e=document.getElementById("root");if(!e)throw new Error("Root element not found");const s=q.createRoot(e),r=i.jsx(Te,{children:i.jsx(Pe,{})});s.render(i.jsx(a.StrictMode,{children:r}))}catch(Ee){document.body.innerHTML='\n    <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; font-family: system-ui;">\n      <div style="text-align: center; padding: 2rem; background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">\n        <h1 style="color: #dc2626; margin-bottom: 1rem;">Błąd inicjalizacji aplikacji</h1>\n        <p style="color: #6b7280; margin-bottom: 1rem;">Sprawdź konsolę przeglądarki, aby uzyskać więcej informacji.</p>\n        <button onclick="window.location.reload()" style="background: #3b82f6; color: white; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer;">Odśwież stronę</button>\n      </div>\n    </div>\n  '}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})});export{G as c,oe as d,he as h,me as q,le as r,ne as s,X as u};
