import{r as e,j as s,P as t,N as a,C as r,T as l,z as i,W as n,I as d,y as c,G as o,Y as x}from"./react-m-WA-DAu.js";import{a as m}from"./utils-qIfB5D_q.js";import{u,c as h}from"./index-BH92hES8.js";import"./vendor-CCzY5YmT.js";const g=[{id:1,symbol:"BTCUSDT",type:"Order Block",direction:"Bullish",confidence:.85,priceLevel:42800,timeframe:"1H",detected:"2 min ago",status:"active"},{id:2,symbol:"ETHUSDT",type:"CHoCH",direction:"Bearish",confidence:.72,priceLevel:2680,timeframe:"4H",detected:"5 min ago",status:"triggered"},{id:3,symbol:"ADAUSDT",type:"Liquidity Sweep",direction:"Bullish",confidence:.91,priceLevel:.485,timeframe:"15M",detected:"1 min ago",status:"active"}],p=[{id:"ORD001",symbol:"BTCUSDT",side:"BUY",type:"LIMIT",quantity:.5,price:42800,status:"FILLED",fillPrice:42805,timestamp:"10:30:45"},{id:"ORD002",symbol:"ETHUSDT",side:"SELL",type:"MARKET",quantity:2,price:null,status:"PENDING",fillPrice:null,timestamp:"10:32:12"}];function j(){const{user:j}=u(),y=!!j,[f,b]=e.useState("BTCUSDT"),[N,v]=e.useState("BUY"),[w,T]=e.useState("LIMIT"),[S,L]=e.useState(""),[C,D]=e.useState(""),[I,U]=e.useState(""),[P,B]=e.useState(""),[k,E]=e.useState(!1),[M,F]=e.useState(!1);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trading Interface"}),s.jsx("p",{className:"text-gray-600",children:"Live SMC pattern detection and order management"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Auto Trading"}),s.jsx("button",{onClick:()=>{E(!k)},className:h("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",k?"bg-green-600":"bg-gray-200"),children:s.jsx("span",{className:h("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",k?"translate-x-6":"translate-x-1")})})]}),k?s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(t,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Active"})]}):s.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[s.jsx(a,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Paused"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Price Chart & SMC Patterns"}),s.jsxs("select",{value:f,onChange:e=>{b(e.target.value)},className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"BTCUSDT",children:"BTC/USDT"}),s.jsx("option",{value:"ETHUSDT",children:"ETH/USDT"}),s.jsx("option",{value:"ADAUSDT",children:"ADA/USDT"}),s.jsx("option",{value:"SOLUSDT",children:"SOL/USDT"})]})]})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"h-96 bg-gray-50 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(r,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"TradingView Chart Integration"}),s.jsxs("p",{className:"text-sm text-gray-400",children:["Real-time ",f," chart with SMC overlays"]})]})})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detected SMC Patterns"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-4",children:g.map(e=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:h("w-3 h-3 rounded-full","active"===e.status?"bg-green-500":"bg-yellow-500")}),s.jsx("span",{className:"font-medium text-gray-900",children:e.symbol}),s.jsx("span",{className:"text-sm text-gray-500",children:e.type}),s.jsx("span",{className:h("px-2 py-1 text-xs font-medium rounded","Bullish"===e.direction?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.direction})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",e.priceLevel.toLocaleString()]}),s.jsx("div",{className:"text-xs text-gray-500",children:e.timeframe})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-gray-500",children:"Confidence:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:100*e.confidence+"%"}})}),s.jsxs("span",{className:"text-gray-900",children:[(100*e.confidence).toFixed(0),"%"]})]})]}),s.jsx("span",{className:"text-gray-500",children:e.detected})]})]},e.id))})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Place Order"})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>{v("BUY")},className:h("flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors","BUY"===N?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.jsx(l,{className:"h-4 w-4 inline mr-1"}),"BUY"]}),s.jsxs("button",{onClick:()=>{v("SELL")},className:h("flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors","SELL"===N?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[s.jsx(i,{className:"h-4 w-4 inline mr-1"}),"SELL"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>{T("MARKET")},className:h("flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors","MARKET"===w?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Market"}),s.jsx("button",{onClick:()=>{T("LIMIT")},className:h("flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors","LIMIT"===w?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Limit"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),s.jsx("input",{type:"number",value:S,onChange:e=>{L(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),"LIMIT"===w&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),s.jsx("input",{type:"number",value:C,onChange:e=>{D(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stop Loss"}),s.jsx("input",{type:"number",value:I,onChange:e=>{U(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Take Profit"}),s.jsx("input",{type:"number",value:P,onChange:e=>{B(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),s.jsxs("button",{onClick:async()=>{if(j)if(!S||parseFloat(S)<=0)x.error("Please enter a valid quantity");else if("LIMIT"!==w||C&&!(parseFloat(C)<=0)){if(!M){F(!0);try{const e={symbol:f,side:N,type:w,quantity:parseFloat(S)};"LIMIT"===w&&C&&(e.price=parseFloat(C)),I&&parseFloat(I)>0&&(e.stopLoss=parseFloat(I)),P&&parseFloat(P)>0&&(e.takeProfit=parseFloat(P));const s=await m.post("/api/binance/place-order",e,{headers:{"Content-Type":"application/json"},timeout:3e4});s.data.success?(x.success(`${N} order placed successfully! Order ID: ${s.data.orderId}`),L(""),D(""),U(""),B("")):x.error(s.data.message||s.data.error||"Failed to place order")}catch(e){if(m.isAxiosError(e))if(e.response){const s=e.response.data?.message||e.response.data?.error||"Server error occurred";x.error(`Order failed: ${s}`)}else e.request?x.error("Network error: Unable to connect to trading server"):x.error("Request error: Failed to send order");else x.error("Unexpected error occurred while placing order")}finally{F(!1)}}}else x.error("Please enter a valid price for limit orders");else x.error("Please log in to place orders")},disabled:M||!y,className:h("w-full py-3 px-4 text-sm font-medium rounded-md transition-colors flex items-center justify-center space-x-2",M||!y?"bg-gray-400 cursor-not-allowed text-white":"BUY"===N?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"),children:[M&&s.jsx(n,{className:"h-4 w-4 animate-spin"}),s.jsx("span",{children:M?"Placing Order...":y?`Place ${N} Order`:"Login Required"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Orders"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-3",children:p.map(e=>s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium",children:e.symbol}),s.jsx("span",{className:h("px-2 py-1 text-xs font-medium rounded","BUY"===e.side?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.side}),s.jsx("span",{className:"text-xs text-gray-500",children:e.type})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:["FILLED"===e.status?s.jsx(d,{className:"h-4 w-4 text-green-500"}):"PENDING"===e.status?s.jsx(c,{className:"h-4 w-4 text-yellow-500"}):s.jsx(o,{className:"h-4 w-4 text-red-500"}),s.jsx("span",{className:"text-xs text-gray-500",children:e.status})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[s.jsxs("div",{children:["Qty: ",e.quantity]}),e.price&&s.jsxs("div",{children:["Price: $",e.price.toLocaleString()]}),e.fillPrice&&s.jsxs("div",{children:["Fill: $",e.fillPrice.toLocaleString()]}),s.jsxs("div",{children:["Time: ",e.timestamp]})]})]},e.id))})})]})]})]})]})}export{j as default};
