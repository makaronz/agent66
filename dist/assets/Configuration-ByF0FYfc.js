import{r as e,j as s,a0 as t,a1 as a,S as n,b as r,a2 as i,I as l,J as c,U as d,E as o,l as m,D as u,V as x}from"./react-m-WA-DAu.js";import{u as b,c as g}from"./index-BH92hES8.js";import"./vendor-CCzY5YmT.js";import"./utils-qIfB5D_q.js";const f=[{id:"binance",name:"Binance",status:"connected",latency:"12ms"},{id:"bybit",name:"ByBit",status:"disconnected",latency:"N/A"},{id:"oanda",name:"OANDA",status:"connected",latency:"28ms"}];function p(){const{session:p}=b(),[h,y]=e.useState("exchanges"),[j,N]=e.useState({}),[v,k]=e.useState({}),[w,S]=e.useState(null),[C,P]=e.useState(null),[V,T]=e.useState({}),[A,M]=e.useState({}),E=e=>{N(s=>({...s,[e]:!s[e]}))},F=[{id:"exchanges",name:"Exchange Setup",icon:a},{id:"smc",name:"SMC Parameters",icon:n},{id:"risk",name:"Risk Management",icon:r},{id:"execution",name:"Execution Engine",icon:i}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuration"}),s.jsx("p",{className:"text-gray-600",children:"Exchange connections, trading parameters, and system settings"})]}),s.jsxs("button",{onClick:()=>{x.success("Konfiguracja została zapisana pomyślnie!",{duration:3e3,position:"top-right",style:{background:"#10B981",color:"#fff"},iconTheme:{primary:"#fff",secondary:"#10B981"}})},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors",children:[s.jsx(t,{className:"h-4 w-4"}),s.jsx("span",{children:"Save Configuration"})]})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:F.map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>{y(e.id)},className:g("flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors",h===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx(t,{className:"h-4 w-4"}),s.jsx("span",{children:e.name})]},e.id)})})}),s.jsxs("div",{className:"space-y-6",children:["exchanges"===h&&s.jsx("div",{className:"space-y-6",children:f.map(e=>s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-1",children:["connected"===e.status?s.jsx(l,{className:"h-5 w-5 text-green-500"}):s.jsx(c,{className:"h-5 w-5 text-red-500"}),s.jsx("span",{className:g("text-sm font-medium","connected"===e.status?"text-green-600":"text-red-600"),children:"connected"===e.status?"Connected":"Disconnected"})]}),"connected"===e.status&&s.jsxs("span",{className:"text-sm text-gray-500",children:["Latency: ",e.latency]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>(async e=>{S(e);try{const s=v[e]?.key,t=v[e]?.secret;if(!s||!t)return alert("Please enter both API key and secret key"),void S(null);if(!p?.access_token)return alert("Please log in to test connection"),void S(null);const a=await fetch("http://localhost:3002/api/binance/test-connection",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify({apiKey:s,secret:t,sandbox:A[e]||!1})}),n=await a.json();n.success?(alert(`Connection successful! Status: ${n.data.status}`),f.map(s=>s.id===e?{...s,status:"connected",latency:"15ms"}:s)):alert(`Connection failed: ${n.error}`)}catch(s){alert("Connection test failed. Please check your network and try again.")}finally{S(null)}})(e.id),disabled:w===e.id,className:g("flex items-center space-x-2 px-3 py-1 text-sm font-medium rounded-md transition-colors",w===e.id?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:[s.jsx(i,{className:"h-4 w-4"}),s.jsx("span",{children:w===e.id?"Testing...":"Test Connection"})]}),s.jsxs("button",{onClick:()=>(async e=>{P(e);try{const s=v[e]?.key,t=v[e]?.secret;if(!s||!t)return alert("Please enter both API key and secret key"),void P(null);if(!p?.access_token)return alert("Please log in to fetch account info"),void P(null);const a=await fetch("http://localhost:3002/api/binance/account-info",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify({apiKey:s,secret:t,sandbox:A[e]||!1})}),n=await a.json();n.success?(T(s=>({...s,[e]:n.data})),alert("Account information fetched successfully!")):alert(`Failed to fetch account info: ${n.error}`)}catch(s){alert("Failed to fetch account information. Please try again.")}finally{P(null)}})(e.id),disabled:C===e.id,className:g("flex items-center space-x-2 px-3 py-1 text-sm font-medium rounded-md transition-colors",C===e.id?"bg-gray-400 text-white cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"),children:[s.jsx(d,{className:"h-4 w-4"}),s.jsx("span",{children:C===e.id?"Fetching...":"Get Account Info"})]})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:j[e.id]?"text":"password",value:v[e.id]?.key||"",onChange:s=>k(t=>({...t,[e.id]:{...t[e.id],key:s.target.value}})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter API key"}),s.jsx("button",{type:"button",onClick:()=>{E(e.id)},className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":j[e.id]?"Ukryj API key":"Pokaż API key",children:j[e.id]?s.jsx(o,{className:"h-4 w-4 text-gray-400","aria-hidden":"true"}):s.jsx(m,{className:"h-4 w-4 text-gray-400","aria-hidden":"true"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secret Key"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:j[e.id]?"text":"password",value:v[e.id]?.secret||"",onChange:s=>k(t=>({...t,[e.id]:{...t[e.id],secret:s.target.value}})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter secret key"}),s.jsx("button",{type:"button",onClick:()=>E(e.id),className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":j[e.id]?"Ukryj Secret Key":"Pokaż Secret Key",children:j[e.id]?s.jsx(o,{className:"h-4 w-4 text-gray-400","aria-hidden":"true"}):s.jsx(m,{className:"h-4 w-4 text-gray-400","aria-hidden":"true"})})]})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),s.jsxs("select",{value:A[e.id]?"true":"false",onChange:s=>M(t=>({...t,[e.id]:"true"===s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"false",children:"Live Trading"}),s.jsx("option",{value:"true",children:"Testnet (Sandbox)"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A[e.id]?"Using testnet environment (safe for testing)":"Using live environment (real money)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate Limit (req/min)"}),s.jsx("input",{type:"number",defaultValue:"1200",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timeout (ms)"}),s.jsx("input",{type:"number",defaultValue:"5000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),V[e.id]&&s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(u,{className:"h-5 w-5 text-green-600"}),s.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Account Information"}),s.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:V[e.id].accountType})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Balances"}),s.jsxs("div",{className:"space-y-1",children:[Object.entries(V[e.id].balances||{}).map(([e,t])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[e,":"]}),s.jsx("span",{className:"font-medium",children:t.total})]},e)),0===Object.keys(V[e.id].balances||{}).length&&s.jsx("p",{className:"text-sm text-gray-500",children:"No balances available"})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trading Fees"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Maker:"}),s.jsxs("span",{className:"font-medium",children:[(100*V[e.id].tradingFees?.maker)?.toFixed(3),"%"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Taker:"}),s.jsxs("span",{className:"font-medium",children:[(100*V[e.id].tradingFees?.taker)?.toFixed(3),"%"]})]})]})]})]}),s.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Last updated: ",new Date(V[e.id].timestamp).toLocaleString()]})]})]})]},e.id))}),"smc"===h&&s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Smart Money Concepts Parameters"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure detection thresholds and sensitivity for SMC patterns"})]}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Block Min Volume"}),s.jsx("input",{type:"number",defaultValue:1e6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum volume required to identify order blocks"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CHoCH Confidence Threshold"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",defaultValue:.75,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum confidence score for CHoCH detection (0-1)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Liquidity Sweep Sensitivity"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",defaultValue:.8,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sensitivity for liquidity sweep detection (0-1)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"FVG Minimum Size"}),s.jsx("input",{type:"number",step:"0.001",defaultValue:.001,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum size for Fair Value Gap detection"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pattern Expiry (Hours)"}),s.jsx("input",{type:"number",defaultValue:24,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hours after which patterns expire if not triggered"})]})]})})]}),"risk"===h&&s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Risk Management Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure position limits, stop losses, and risk controls"})]}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Position Size (USD)"}),s.jsx("input",{type:"number",defaultValue:1e4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Loss Limit (USD)"}),s.jsx("input",{type:"number",defaultValue:500,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Drawdown (%)"}),s.jsx("input",{type:"number",defaultValue:10,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position Size (% of Portfolio)"}),s.jsx("input",{type:"number",defaultValue:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Stop Loss (%)"}),s.jsx("input",{type:"number",step:"0.1",defaultValue:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Take Profit Ratio"}),s.jsx("input",{type:"number",step:"0.1",defaultValue:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})})]}),"execution"===h&&s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Execution Engine Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure order execution, slippage, and latency parameters"})]}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Slippage (bps)"}),s.jsx("input",{type:"number",defaultValue:"10",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Timeout (ms)"}),s.jsx("input",{type:"number",defaultValue:"5000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Retry Attempts"}),s.jsx("input",{type:"number",defaultValue:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Circuit Breaker Threshold"}),s.jsx("input",{type:"number",defaultValue:"5",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Failed orders before circuit breaker activates"})]})]})})]})]})]})}export{p as default};
